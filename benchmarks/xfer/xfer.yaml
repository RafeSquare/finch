
stage:
  name: xfer

  # In _all.config, params.customers=1M. These params set the upper and lower
  # bounds of rows accessed. The default is the top 25% (250k) rows because it's
  # common that only a fraction of customers are active.
  params:
    min: 500k
    max: $params.customers
    active: 20  # percentage of active customers

  runtime: 60s

  workload:
    - clients: 1
      iter: 1

  trx:
    - file: ./trx/xfer.sql
      data:
        # Select a random sender (by customers.id)
        sender_id:
          generator: "int-gaps"
          params:
            p: $params.active
            min: $params.min
            max: $params.max
        sender_balance_id:
          generator: column
          quote-value: no # numeric

        # Select a random receiver in the same country
        receiver_id:
          generator: "int-range"
          params:
            size: 100 # random 100-value range between
            min: $params.min
            max: $params.max
        receiver_balance_id:
          generator: column
          quote-value: no # numeric

        # Random text for the fake transfer data
        x_token:
          generator: xid
        xfer_id:
          generator: column
          quote-value: noa # numeric
        c1:
          generator: "str-fill-az"
          params:
            len: 25
        c2:
          generator: "str-fill-az"
          params:
            len: 75
        c3:
          generator: "str-fill-az"
          params:
            len: 10

